## Домашняя работа
#### Занятие 12 . Настройка Postrgresql
**Параметры системы:**

RAM: 4GB
Ядра: 4
SSD: 128 GB 
pgbench test -P 30 -T 360 -c 10

Удалось достичь ~5000 tps при следующих настройках

|Параметр						|Значение	|Коментарий|
|-------------------------------|-----------|------------
|max_connections				|	10	    | |
|shared_buffers					|1600MB		|RAM*0.4   Взято максимальное рекомендуемое разработчиками значение. Увеличение до 2GB не повлияло на результаты|
|effective_cache_size			|3GB		|	Выставлено как RAM*0.75 |
|work_mem						|160MB		|Выставлено как RAM * 0.4 /max_connections. Для увеличения лимитов оперативной памяти для выполнения запросов|
|maintenance_work_mem			|2GB		|	Т.к. обслуживающие операции как правило не идут в параллель, установим как RAM*0.5 для более быстрого их выполнения| 
|checkpoint_timeout 			|	45 min	|	Увеличено до 45 мин для сокращения количества операций сброса на диск|
|effective_io_concurrency		|200		|	Выставлено 200 по рекомендации для SSD, т.к. возможно параллельное выполнение опереаций ввода-вывода|
|checkpoint_completion_target	|0,9		|	Установлено в 0.9. Увеличение параметра позволяет снизить нагрузку на систему ввода-вывода. |
|wal_buffers					|	-1		|	Оставлено по-умолчанию (автонастройка)|
|max_worker_processes			|4			|Установлено в соответствии с количеством ядер на сервере|
|fsync							|off		|	Отсутствие гарантии записи на диск после каждой транзакции. Увеличение скорости при insert/update|
|synchronous_commit				|off		|	Ускорит время записи, т.к. не будет ожидания ответа об успешности записи WAL на диск|
|full_page_writes				|off		|	Отключение записи всей страницы в WAL при ее изменении после контрольной точки.|
|max_wal_size					|3GB		|	Увеличено для сокращения количества операций сброса на диск|