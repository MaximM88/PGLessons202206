## Домашняя работа
#### Занятие 20 . Партиционирование

1. Смотрим на структуру таблицы flights
![01](https://github.com/MaximM88/PGLessons202206/blob/main/20-1-1.png?raw=true)

2. Поскольку в таблице содержатся периодические данные, имеет смысл разбивать по диапазону дат (поле scheduled_departure). Оцениваем общее количество значений, минимальное и максимальное значение. Оценим предполагаемый размер партиций, сгруппировав данные по кварталам. Размерность партиции примем за квартал.
![01](https://github.com/MaximM88/PGLessons202206/blob/main/20-2-2.png?raw=true)

3. Создаем аналогичную по структуре таблицу flights_p. Создаем партиции, в т.ч. дефолтную.
![01](https://github.com/MaximM88/PGLessons202206/blob/main/20-3-3.png?raw=true)

4. Перенесем данные в партицированную таблицу. 
![01](https://github.com/MaximM88/PGLessons202206/blob/main/20-4-4.png?raw=true)

Т.к. партиция для 3 квартала 2017 года не была создана, то все данные попали в default партицию. Отключим дефолтную партицию, создадим новую, перенесем данные, добавим дефолтную партицию заново.
![01](https://github.com/MaximM88/PGLessons202206/blob/main/20-5-5.png?raw=true)


5. При выполнении плана запроса видим, что поиск только в определенной партиции.

![01](https://github.com/MaximM88/PGLessons202206/blob/main/20-6-6.png?raw=true)

6. Создадим составной индекс по flight_no и scheduled_departure. Индекс создается на всех партициях. Поиск в партиции происходит с использованием индекса.

![01](https://github.com/MaximM88/PGLessons202206/blob/main/20-7-7.png?raw=true)







